# Muse 更新日志

## [1.4.4] - 2026-01-02

### ✨ 新特性

#### 安全性与 Web 端优化
- **新增内容安全策略 (CSP)**：在 `index.html` 中配置了严格的 CSP，防止 XSS 攻击并限制非授权的数据连接。
- **新增 Web App Manifest**：添加了 `manifest.json`，提升 Web 端作为应用运行的合规性与安全性。
- **优化引用策略**：设置 `Referrer-Policy` 为 `strict-origin-when-cross-origin`，保护用户隐私。
- **完善安全元数据**：添加了 `robots.txt` 和 `.well-known/security.txt`，提升站点的专业性与安全性评分。

#### 词库管理功能增强
- **新增导出功能**：支持将词库导出为标准 JSON 格式文件，包含完整的单词释义、例句、音标等数据。
- **导入格式升级**：
  - 导入功能现在支持完整的单词对象格式，能够完美还原导出的词库数据。
  - 保持对旧版 `{"单词": 优先级}` 格式的兼容。
  - 优化了导入界面的格式说明和错误提示。

## [1.4.3] - 2026-01-02

### ✨ 新特性

#### 设置界面 UI/UX 重构
- **设置项弹窗化**：将“快捷键设置”和“AI 智能服务”移至独立模态弹窗，主界面更清爽。
- **每日目标交互优化**：新增键盘输入框，支持直接输入单词数量（1-500），并与滑动条实时同步。
- **AI 服务协议化**：
  - 重新设计 AI 配置界面，聚焦于 API 协议（OpenAI, Claude, Gemini, Ollama）。
  - **新增 Claude 协议支持**：预设 Anthropic 官方 API 及模型配置。
  - **新增 Gemini 协议支持**：预设 Google AI 官方 API 及模型配置。
  - **精简 OpenAI 协议**：将 DeepSeek、智谱 AI 等兼容服务整合进 OpenAI 协议选项，支持自定义 Base URL。
- **视觉增强**：为不同 AI 协议添加了专属图标（Sparkles, Cloud 等），优化了测试连接的交互反馈。

### 🔄 功能调整
- **移除学习提醒设置**：去掉了手动设置提醒的功能，简化系统逻辑。

## [1.4.2] - 2026-01-02

### ✨ 新特性

#### 词库管理深度优化
- **AI 生成稳定性增强**：引入分批生成逻辑，支持一次性稳定生成更多单词（最高 50 个）。
- **智能去重机制**：在导入或 AI 生成单词时，自动识别并关联数据库中已存在的单词，防止数据冗余。
- **UI/UX 改进**：
  - 优化了“查看单词”按钮的视觉样式。
  - AI 生成数量支持键盘直接输入，并增加了高数量生成的风险提示。
  - 移除了词库卡片上的即时计数显示，使界面更简洁。
- **词库删除功能**：支持删除自定义词库及其关联关系。

#### 视觉体验升级
- **全新启动动画**：重构了 SplashScreen，采用深色科技风格，增加动态粒子、旋转光环及漂浮图标，提升品牌感。
- **动态加载提示**：启动时显示更有趣的 AI 初始化状态切换。

### 🐞 修复
- **修复词数统计**：解决词书内部单词数量计数不准的问题。
- **修复删除逻辑**：修复了在词书内删除单词时，每次只能删除一个的逻辑错误。

## [1.4.1] - 2026-01-02

### ✨ 新特性

#### AI 学习助手
- **AI 教练 (AI Coach)**：新增 AI 教练页面，提供个性化的学习建议、进度分析和薄弱环节洞察。
- **AI 测验 (AI Quiz)**：新增 AI 驱动的动态测验，根据用户词汇水平实时生成题目。
- **智能进度追踪**：通过 AI 分析学习数据，提供更深度的统计信息。

## [1.3.0] - 2026-01-01

### ✨ 新特性

#### 单词搜索页面
- **独立搜索页面**：新增单词搜索专属页面
- **搜索历史**：保存最近搜索记录，方便快速访问
- **AI深度分析**：对搜索的单词提供AI驱动的详细分析
- **添加到词本**：搜索的单词可直接添加到自定义词本

#### 单词数据智能补充
- **自动检测不完整数据**：识别词性为"unknown"或翻译为"待补充"的单词
- **AI自动补充**：下载或学习时自动用AI补充缺失的词性、翻译信息
- **智能词性标准化**：将"noun"、"verb"等标准化为"n."、"v."格式

### 🔄 功能移除
- **移除划词翻译功能**：简化应用功能，移除系统托盘的划词翻译选项
- 移除 `Ctrl+Shift+T` 全局快捷键
- 移除 `TranslationPopup` 组件

### 🔧 技术改进
- 重构 `DictionaryService` 类，优化API数据获取和AI补充流程
- 新增 `needsEnrichment()` 方法检测数据完整性
- 新增 `enrichWord()` 公开方法供外部调用

---

## [1.2.0] - 2025-01-01

### ✨ 新特性

#### AI无缝集成到学习界面
- **移除独立的AI助手按钮**：不再需要手动点击"AI智能助手"按钮
- **自动加载AI内容**：当显示单词答案时，AI会自动在后台分析并生成内容
- **融合式展示**：AI生成的内容直接嵌入到单词释义区域中，与字典释义无缝融合

#### AI增强内容
1. **AI深度解释**
   - 基本含义：简洁的中文解释
   - 详细解释：包括词源、引申义、语境用法
   - 用法要点：使用场景和搭配建议
   - 常见错误：帮助避免常见误用

2. **AI智能例句**
   - 在字典例句后自动添加AI生成的例句
   - 每个例句包含英文原句和中文翻译
   - 例句更贴合实际使用场景
   - 支持一键复制例句

3. **深度理解**
   - 基于AI详细解释的扩展说明
   - 帮助更深入地理解单词用法

#### 视觉优化
- 使用渐变色背景区分AI生成内容（紫色-蓝色渐变）
- AI内容带有 ✨ Sparkles 图标标识
- 加载状态显示友好的"AI正在分析..."提示
- AI例句采用独特的紫色-粉色渐变背景

### 🎯 用户体验改进
- **零感知AI调用**：用户无需主动触发，AI自动工作
- **内容融合**：不再有"单词释义"和"AI助手"的界面分离感
- **智能缓存**：切换单词时自动清理旧内容
- **优雅降级**：当AI服务未配置或失败时，不影响基础学习功能

### 🔧 技术改进
- 移除 `showAIAssistant` 状态管理
- 移除 `AIAssistant` 组件依赖
- 新增 `aiExamples`、`aiExplanation`、`aiMemoryTip` 状态
- 使用 `useEffect` 监听 `showAnswer` 自动触发AI内容加载
- 并行请求AI服务以提升响应速度

### 📝 代码变更
- 文件：`src/pages/Learn.tsx`
  - 重构AI内容加载逻辑
  - 更新释义区域UI布局
  - 集成AI内容到单词卡片中

---

## [1.1.0] - 2024-12-31

### ✨ 新特性
- AI自动补全单词信息（音标、翻译、释义）
- 后台词库下载，支持进度显示
- 产品更名为"Muse"

### 🐛 Bug修复
- 修复Windows任务栏图标不显示的问题
- 修复图标路径错误

---

## [1.0.0] - 2024-12-30

### 🎉 首次发布
- 核心学习功能（闪卡、SM-2算法）
- 多AI提供商支持
- 剪贴板翻译
- 快捷键支持
- 词库管理
